# Mosquitto Configuration for AI Assistant
# ==========================================

# Persistence settings
persistence true
persistence_location /mosquitto/data/

# Logging
log_dest file /mosquitto/log/mosquitto.log
log_dest stdout
log_type error
log_type warning
log_type notice
log_type information
connection_messages true
log_timestamp true

# Default listener (MQTT protocol)
listener 1883
protocol mqtt
allow_anonymous true

# WebSocket listener (for browser clients)
listener 9001
protocol websockets
allow_anonymous true

# Performance tuning
max_connections -1
max_queued_messages 1000
max_queued_bytes 0
max_inflight_messages 20
max_inflight_bytes 0

# Message size limit (10MB for large payloads like video frames)
message_size_limit 10485760

# Keepalive settings
max_keepalive 120

# Retry interval for QoS 1/2 messages
retry_interval 20

# Queue QoS 0 messages during client disconnect
queue_qos0_messages false

# Auto-save interval for persistence (in seconds)
autosave_interval 300
